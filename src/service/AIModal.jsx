import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
 
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Philippines ONLY Travel Plan for Location: Cebu City, with 3 Days for Couple with a low cost Budget Plan in Philippine Pesos, Give me a Hotel Options list with HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, descriptions, and suggest itinerary with placeName, place details, place image url, geo coordinates, ticket pricing, rating, time travel of each location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a detailed 3-day Cebu City travel plan for a couple on a low-cost budget, all in Philippine Pesos (PHP), along with hotel options and itinerary details in JSON format:\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Cebu City, Philippines\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Low Cost (Philippine Pesos)\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"RedDoorz Plus @ Queens Road Cebu City\",\n      \"hotelAddress\": \"442 Queens Road, Cebu City, 6000 Cebu, Philippines\",\n      \"price\": \"₱1200 - ₱1800 per night\",\n      \"hotelImageUrl\": \"https://images.trvl-media.com/lodging/67000000/66860000/66853800/66853740/9221a3ef.jpg?impolicy=resizecrop&c=at100&w=1200&h=800&p=1\",\n       \"geoCoordinates\": {\n        \"latitude\": 10.31241,\n        \"longitude\": 123.88744\n      },\n       \"rating\": 7.5,\n       \"description\": \"A budget-friendly hotel with clean rooms and basic amenities, located near Fuente Osmeña Circle. Offers good value for money and convenient access to transportation.\",\n\n      \n    },\n     {\n      \"hotelName\": \"OYO 168 Aljem's Inn\",\n      \"hotelAddress\": \"153 M. J. Cuenco Ave, Cebu City, 6000 Cebu, Philippines\",\n      \"price\": \"₱900 - ₱1500 per night\",\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/ef/2d/47/oyo-168-aljem-s-inn.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 10.32603,\n        \"longitude\": 123.89493\n      },\n      \"rating\": 7.2,\n      \"description\": \"A simple and affordable inn with comfortable rooms, located in a busy area.  Provides easy access to transportation and nearby food options.\",\n      \n    },\n    {\n      \"hotelName\": \"The宿 (The Shukubo)\",\n      \"hotelAddress\": \"34-1A Gorordo Ave, Cebu City, 6000 Cebu, Philippines\",\n      \"price\": \"₱1100 - ₱1700 per night\",\n      \"hotelImageUrl\":\"https://lh3.googleusercontent.com/p/AF1QipO1iF7jZkO9Bv9wV9hJqV0h8t5XG7X_tT0e4Q_v=s1600-w400\",\n      \"geoCoordinates\": {\n        \"latitude\": 10.32201,\n        \"longitude\": 123.89558\n      },\n      \"rating\": 8.0,\n      \"description\": \"A budget-friendly accommodation known for its minimalist style and clean environment. It is in a prime location of the city, with easy access to malls, shops, and restaurants. \",\n       \n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Historical Cebu\",\n      \"bestTimeToVisit\": \"Morning (8:00 AM - 12:00 PM) for cooler weather\",\n      \"activities\": [\n        {\n          \"placeName\": \"Magellan's Cross\",\n          \"placeDetails\": \"A historical landmark marking the spot where Ferdinand Magellan planted a cross in 1521. It's a must-see for historical significance.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Magellan%27s_Cross.jpg/800px-Magellan%27s_Cross.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.29179,\n            \"longitude\": 123.90330\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.4,\n           \"timeTravel\": \"15-20 minutes from hotel options\"\n        },\n        {\n          \"placeName\": \"Basilica del Santo Niño\",\n          \"placeDetails\": \"A historic church housing the image of the Santo Niño (Child Jesus). Experience the devotion of the Filipinos here. Dress respectfully.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Basílica_Minore_del_Santo_Niño_%28Cebu%29.jpg/800px-Basílica_Minore_del_Santo_Niño_%28Cebu%29.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.29266,\n            \"longitude\": 123.90237\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.6,\n           \"timeTravel\": \"5 minutes walking distance from Magellan's Cross\"\n        },\n         {\n          \"placeName\": \"Fort San Pedro\",\n          \"placeDetails\": \"A historical fort that served as a military defense structure in the past. Offers great views of the coast and a glimpse into Cebu's colonial history.\",\n          \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Fort_San_Pedro_Cebu.jpg/800px-Fort_San_Pedro_Cebu.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 10.29112,\n            \"longitude\": 123.90416\n          },\n          \"ticketPricing\": \"₱30 per person\",\n            \"rating\": 4.3,\n           \"timeTravel\": \"5 minutes walking distance from Basilica del Santo Niño\"\n\n        },\n          {\n          \"placeName\": \"Yap-Sandiego Ancestral House\",\n          \"placeDetails\": \"Step back in time at this preserved ancestral home. Experience traditional Filipino life. Perfect for culture enthusiasts.\",\n           \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Yap_Sandiego_ancestral_house_in_Cebu.jpg/800px-Yap_Sandiego_ancestral_house_in_Cebu.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.29343,\n            \"longitude\": 123.90062\n          },\n          \"ticketPricing\": \"₱150 per person\",\n          \"rating\": 4.2,\n           \"timeTravel\":\"10-minute walk from Fort San Pedro\"\n\n        }\n\n      ]\n    },\n     \"day2\": {\n      \"theme\": \"City Exploration & Local Flavors\",\n       \"bestTimeToVisit\": \"Afternoon (2:00 PM - 6:00 PM) when the market is bustling\",\n      \"activities\": [\n        {\n          \"placeName\": \"Carbon Market\",\n          \"placeDetails\": \"A vibrant and bustling local market. Experience the everyday life of the Cebuanos. Be prepared for a sensory overload. Best for a truly local experience.\",\n           \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Carbon_Market_Cebu.jpg/800px-Carbon_Market_Cebu.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.29626,\n            \"longitude\": 123.89347\n          },\n           \"ticketPricing\": \"Free\",\n           \"rating\": 3.9,\n            \"timeTravel\": \"20-30 minutes by jeepney from hotel options\"\n        },\n         {\n          \"placeName\": \"Temple of Leah\",\n          \"placeDetails\": \"A grand Roman-inspired temple built as a symbol of love. Enjoy panoramic views of the city. Ideal for photos.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Temple_of_Leah_Cebu_City.jpg/800px-Temple_of_Leah_Cebu_City.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.36111,\n            \"longitude\": 123.87114\n          },\n          \"ticketPricing\": \"₱100 per person\",\n            \"rating\": 4.4,\n           \"timeTravel\": \"30-40 minutes by taxi/Grab from Carbon Market \"\n        },\n           {\n           \"placeName\": \"Sirao Garden\",\n           \"placeDetails\": \"Known as the 'Little Amsterdam' of Cebu. Enjoy a picturesque garden with vibrant flowers. Great spot for sunset viewing. Ideal for romantic photoshoots.\",\n           \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/0a/52/e8/sirao-garden.jpg?w=700&h=-1&s=1\",\n           \"geoCoordinates\": {\n            \"latitude\": 10.36787,\n            \"longitude\": 123.85087\n          },\n          \"ticketPricing\": \"₱100 per person\",\n           \"rating\": 4.3,\n            \"timeTravel\":\"20-30 minutes by taxi/Grab from Temple of Leah\"\n         }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Relaxation & Souvenir Shopping\",\n       \"bestTimeToVisit\": \"Late Morning/Afternoon (10:00 AM - 4:00 PM)\",\n      \"activities\": [\n        {\n          \"placeName\": \"Taoist Temple\",\n          \"placeDetails\": \"Explore this colorful Taoist temple nestled in the hills of Beverly. Offers scenic views and a unique cultural experience. Best for serene exploration.\",\n           \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Cebu_Taoist_Temple_%28Entrance%29.jpg/800px-Cebu_Taoist_Temple_%28Entrance%29.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.32323,\n            \"longitude\": 123.87929\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.5,\n            \"timeTravel\":\"15-20 minutes from hotel options via jeepney or taxi/Grab\"\n\n        },\n        {\n          \"placeName\": \"Ayala Center Cebu\",\n          \"placeDetails\": \"A premier shopping mall in Cebu. Great for window shopping, enjoying a meal, or buying local souvenirs. Best for modern shopping experience.\",\n           \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Ayala_Center_Cebu.jpg/800px-Ayala_Center_Cebu.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 10.31901,\n            \"longitude\": 123.90150\n          },\n          \"ticketPricing\": \"Free (unless you buy items)\",\n           \"rating\": 4.6,\n            \"timeTravel\":\"20-30 minutes by jeepney or taxi/Grab from Taoist Temple\"\n        },\n        {\n           \"placeName\": \"SM City Cebu\",\n           \"placeDetails\": \"Another large shopping mall for diverse shopping and dining options. Offers a range of local and international brands. Best for all your shopping needs before departure.\",\n            \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/SM_City_Cebu.jpg/800px-SM_City_Cebu.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 10.30547,\n            \"longitude\": 123.90707\n           },\n           \"ticketPricing\": \"Free (unless you buy items)\",\n           \"rating\": 4.5,\n             \"timeTravel\":\"5-10 minutes taxi/Grab or jeepney from Ayala Center Cebu\"\n        }\n      ]\n    }\n  }\n}\n```\n**Important Notes:**\n\n*   **Budget:** This is a low-cost plan.  Transportation will primarily use jeepneys (very cheap), walking, and occasional Grab/taxis.  Food can be kept low by eating at local eateries (\"carenderias\") and markets.\n*   **Currency:**  All prices are in Philippine Pesos (PHP).\n*   **Transportation:** Jeepneys are very affordable but can be crowded. Grab or taxis are more comfortable but cost more.\n*   **Food:** Try \"lechon\" (roasted pig) and \"puso\" (rice wrapped in banana leaves), which are local Cebuano specialties.\n*   **Flexibility:**  This plan is a suggestion. Adjust it to your pace and interests.\n\nLet me know if you have any specific preferences or would like any modifications!\n"},
          ],
        },
      ],
    });
  